(function(a){function c(){a(".menu-dropdown").click(new function(){alert("click")})}var b=function(){function h(e){e!==undefined&&(g=e);c=a(g.content);var f=c.css("backgroundImage").replace(/url\("(.+)"\)/,"$1");d=a(g.outer);d.css({"overflow-x":"hidden"});d.css("background-image","url('"+f+"')");c.css({width:"200%",position:"absolute"});var h=m(c.html(),f);j(c.html(),f,n());c.html(h);a(".slide",c).addClass("current");b=a(g.menu);c=a(g.content);b.prepend('<li><span class="arrow-nav prev"><a href="#previous">'+Drupal.t("Back")+"</a></span></li>");b.append('<li><span class="arrow-nav next"><a href="#next">'+Drupal.t("Forward")+"</a></span></li>")}function i(){var c=p();if(c!=""){var d="/"+(c=="frontpage"?"":c);if(d!="/"||!a("body").hasClass("front")){var f=a('a[href="'+d+'"]',b);l(d,f,"fade")}}b.delegate(".leaf a","click",function(b){b.stopPropagation();b.preventDefault();if(e)return;e=!0;var c=a(b.target);l(c.attr("href"),c,"fade")});b.delegate(".arrow-nav","click",function(b){b.stopPropagation();b.preventDefault();if(e)return;e=!0;var c=a(b.target);c.attr("href")=="#previous"?t():s()})}function j(a,b,c){var d={background:b,content:a};f[c]=d;return d}function k(a){return f[a]!==undefined?f[a]:null}function l(b,c,d){var e=n(b),f=k(e);f!==null?r(f,c,d):a.get(b+"?ajax=1",function(a){a=j(a.content,a.background,e);r(a,c,d)});o(e)}function m(a,b){b===undefined&&(b="");return'<div class="slide" style="width: 50%; background-image: url(\''+b+"')\">"+a+"</div>"}function n(a){var b="";if(a===undefined){a=window.location.pathname=="/"?"/frontpage":window.location.pathname;b=a.substr(1)}else if(a.charAt(0)=="/"){b=a.substr(1);b==""&&(b="frontpage")}else b=a;return b}function o(a){window.location.hash=a}function p(){return window.location.hash.substr(1)}function q(c){a("a",b).removeClass("active");c.addClass("active")}function r(b,f,h){var i=a(".current",c),j=a(m(b.content,b.background)).addClass(h);if(h=="left"){i.css("right","0%");c.prepend(j.css("left","0%"));c.css("right","0%").animate({right:"-100%"},g.slideSpeed,function(){i.remove();c.css("right","auto");j.css("left","auto");j.removeClass("left").addClass("current");j.css("backgroundImage","none");d.css("backgroundImage","url('"+b.background+"')");e=!1})}else if(h=="right"){c.css("right","-100%");c.append(j.css("left","50%"));c.animate({right:"0%"},g.slideSpeed,function(){i.remove();c.css("right","auto");j.css("left","auto");j.removeClass("right").addClass("current");j.css("backgroundImage","none");d.css("backgroundImage","url('"+b.background+"')");e=!1})}else{i.remove();j.hide();c.append(j);j.fadeIn(g.fadeSpeed,function(){j.css("filter","alpha(opacity=100)");j.css("opacity","1");j.removeClass("fade").addClass("current");j.css("backgroundImage","none");d.css("backgroundImage","url('"+b.background+"')");e=!1})}q(f);o(n(f.attr("href")))}function s(){var c=a("a.active",b);if(c.length==1){var d=c,e=c.parent().parent();e.hasClass("last")?d=a(".first a",e.parent()):d=a("a",e.next());l(d.attr("href"),d,"right")}}function t(){var c=a("a.active",b);if(c.length==1){var d=c,e=c.parent().parent();e.hasClass("first")?d=a(".last a",e.parent()):d=a("a",e.prev());l(d.attr("href"),d,"left")}}var b=undefined,c=undefined,d=undefined,e=!1,f={},g={menu:".region-menu ul",content:"#zone-content-wrapper",outer:"#section-content",fadeSpeed:600,slideSpeed:800};return{init:h,start:i}}();a(document).ready(function(){if(!a("body").hasClass("logged-in")){b.init();b.start()}})})(jQuery);